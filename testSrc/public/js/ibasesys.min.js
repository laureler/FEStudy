/*! 系统全局可用的通用方法定义 更新时间：2017-5-26 */
function analyseError(a){if(!a)return"";var c,b,d,e;if(b=findMessage(a,0,"[errs]","[erre]"))return b;d="\x3cbody\x3e\x3ch1\x3e";c=a.indexOf(d);if(0<=c){b=findMessage(a,c,d,"\x3c/h1\x3e");var f="";if(0<=b.indexOf("Http\u4ee3\u7801:")||0<=b.indexOf("Internal Server Error"))d="essage\x3c/b\x3e",e=a.indexOf(d,c),0<e&&(f=findMessage(a,e+d.length,"","\x3c/p\x3e"));f||(d="escription\x3c/b\x3e",e=a.indexOf(d,c),0<e&&(f=findMessage(a,e+d.length,"","\x3c/p\x3e")));return f?b+"\n"+f:b}d="\x3cbody\x3e";c=a.indexOf(d);0<=c&&(c+=d.length,a=a.substring(c));return 300>=a.length?a:a.substr(0,300)+"..."}function findMessage(a,c,b,d){var e=c;b&&(e=a.indexOf(b,c));return 0<=e?(b&&(e+=b.length),a.substring(e,a.indexOf(d,e))):""}function showSuccess(a,c,b){c||(c="\u63d0\u793a");b?$.messager.show({title:c,msg:a,timeout:2E3,showType:"fade",style:{right:"",bottom:""}}):$.messager.show({title:c,msg:a,timeout:2E3,showType:"slide"})}function showAjaxError(a,c,b,d){d||(d="\u63d0\u793a");(a=analyseError(a.responseText))?showError(a,d):(a="",c&&(a+="["+c+"]"),b&&(a+=b),a&&(a="\uff1a"+a),showError("\u672a\u77e5\u7684\u539f\u56e0"+a,d))}function showError(a,c,b){c||(c="\u63d0\u793a");b||(b="info");$.messager.alert(c,a,b)}Array.prototype.indexOf=function(a){for(inx in this)if(this[inx]==a)return inx;return-1};Date.prototype.Format=function(a){var c={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var b in c)(new RegExp("("+b+")")).test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?c[b]:("00"+c[b]).substr((""+c[b]).length)));return a};function htmlEncode(a){if(!a)return"";a=a.replace(/&/g,"\x26amp;");a=a.replace(/</g,"\x26lt;");a=a.replace(/>/g,"\x26gt;");a=a.replace(/\'/g,"\x26apos;");a=a.replace(/\"/g,"\x26quot;");a=a.replace(/\r/g,"\x26#13;");return a=a.replace(/\n/g,"\x26#10;")}function toIdEncode(a){return a.replace(/\_/g,"_w").replace(/\~/g,"_q").replace(/\!/g,"_1").replace(/\@/g,"_2").replace(/\#/g,"_3").replace(/\$/g,"_4").replace(/\-/g,"_s").replace(/\\/g,"_h").replace(/\:/g,"_u").replace(/\</g,"_o").replace(/\>/g,"_p").replace(/\./g,"_z").replace(/\?/g,"_x").replace(/\//g,"_c")}function fromIdEncode(a){return a.replace(/\_q/g,"~").replace(/\_1/g,"!").replace(/\_2/g,"@").replace(/\_3/g,"#").replace(/\_4/g,"$").replace(/\_s/g,"-").replace(/\_h/g,"\\").replace(/\_u/g,":").replace(/\_o/g,"\x3c").replace(/\_p/g,"\x3e").replace(/\_z/g,".").replace(/\_x/g,"?").replace(/\_c/g,"/").replace(/\_w/g,"_")}function formatDate(a){return a?(new Date(a)).Format("yyyy-MM-dd HH:mm:ss"):""}function IsValidId(a){if(!a)return!1;a+="";return 0==a.length||"#"==a.charAt(0)?!1:!0}function getSearchParams(a){var c={};if(!a)return c;var b=a.indexOf("?");0<=b&&(a=a.substr(b+1));a=a.split("\x26");for(var d=0;d<a.length;++d){var e=a[d],b=e.indexOf("\x3d");0<b?c[e.substr(0,b)]=e.substr(b+1):c[e]=""}return c}function getDomainFromUrl(a){var c=document.domain,c=c.toLowerCase();if(!a)return c;var b=a.indexOf("?");0>b&&(b=a.length);var d=a.indexOf("://");if(0>d||d>b)return c;var d=d+3,e=a.indexOf("/",d);0>e&&(e=b);c=a.substring(d,e).toLowerCase();e=c.indexOf(":");0<=e&&(c=c.substr(0,e));return c}function tagGetRequest(a){var c="_t"+Math.round(1E4*Math.random()).toString(16),c=c+"\x3d"+(new Date).getTime().toString(16),b=a.indexOf("?")+1;return 0>=b?a+"?"+c:a.substr(0,b)+c+"\x26"+a.substr(b)}function invokeJson(a,c,b){b||(b={});b.jsonObj?invokeJsonObj(a,c,b):(b.msg||(b.msg="\u64cd\u4f5c"),b.sFn||(b.sFn=function(a){showSuccess(b.msg+"\u6210\u529f")}),b.fFn||(b.fFn=function(a,c,f){showError(b.msg+"\u5931\u8d25\uff1a"+analyseError(a.responseText))}),null==b.async&&(b.async=!0),b.method?"GET"==b.method.toUpperCase()&&(a=tagGetRequest(a)):b.method="POST",$.ajax({url:a,type:b.method,async:b.async,content:document.body,data:c,success:b.sFn,error:b.fFn}))}function invokeJsonObj(a,c,b){b||(b={});b.msg||(b.msg="\u64cd\u4f5c");b.sFn||(b.sFn=function(a){showSuccess(b.msg+"\u6210\u529f")});b.fFn||(b.fFn=function(a,c,f){showError(b.msg+"\u5931\u8d25\uff1a"+analyseError(a.responseText))});b.async||(b.async=!0);b.method?"GET"==b.method.toUpperCase()&&(a=tagGetRequest(a)):b.method="POST";$.ajax({url:a,type:b.method,async:b.async,context:document,contentType:"application/json;charset\x3dutf-8",data:JSON.stringify(c),success:b.sFn,error:b.fFn})}function invokeJsonp(a,c,b){b||(b={});b.msg||(b.msg="\u64cd\u4f5c");b.sFn||(b.sFn=function(a){showSuccess(b.msg+"\u6210\u529f")});b.fFn||(b.fFn=function(a,c,f){showError(b.msg+"\u5931\u8d25:"+analyseError(a.responseText),"\u63d0\u793a")});null==b.async&&(b.async=!0);b.method?"GET"==b.method.toUpperCase()&&(a=tagGetRequest(a)):b.method="POST";$.ajax({url:a,type:b.method,async:b.async,dataType:"jsonp",jsonp:"ibase2-xjp-cb",data:c,crossDomain:!0,success:b.sFn,error:b.fFn})}function getOrganFullName(a,c){if(2==c.attributes.organType||3==c.attributes.organType)return"["+c.text+"]";var b=[];for(10!=c.attributes.organType&&b.push("*");c;)IsValidId(c.id)&&b.unshift(c.text),c=a.tree("getParent",c.target);return b.join("/")}function searchTreeNode(a,c,b){if(c){var d=a.tree("getRoots");if(0!=d.length){c=c.toUpperCase();var e=a.tree("getSelected"),f=!1;null==e&&(e=d[0],f=!0);var g=getTreeNode(a,d,e,c,!1,b);null!=g||f||(g=getTreeNode(a,d,e,c,!0,b));null==g?showSuccess("\u672a\u641c\u7d22\u5230 \uff1a "+c,"\u63d0\u793a"):selectNode(a,g)}}else $.messager.alert("\u63d0\u793a","\u8bf7\u8f93\u5165\u8981\u67e5\u627e\u7684\u4fe1\u606f","info")}function getTreeNode(a,c,b,d,e,f){for(var g=null,h=0;h<c.length;++h){if(!e)c[h].target==b.target&&(e=!0);else if(0<=c[h].text.toUpperCase().indexOf(d)){g=c[h];break}else if(f&&0<=c[h].id.toUpperCase().indexOf(d)){g=c[h];break}for(var l=a.tree("getChildren",c[h].target),k=0;k<l.length;++k)if(!e)l[k].target==b.target&&(e=!0);else if(0<=l[k].text.toUpperCase().indexOf(d)){g=l[k];break}else if(f&&0<=l[k].id.toUpperCase().indexOf(d)){g=l[k];break}if(null!=g)break}return g}function IsParentCheck(a,c){return null!=GetCheckedParent(a,parent)}function GetCheckedParent(a,c){var b=a.tree("getParent",c.target);return null==b?null:IsCheckedTreeNode(a,b)?b:GetCheckedParent(a,b)}function IsCheckedTreeNode(a,c){return c&&c.checked}function selectNode(a,c){c=normalNode(c,a);a.tree("expandTo",c.target);a.tree("select",c.target);a.tree("scrollTo",c.target)}function normalNode(a,c){if(null==a.target){if(c)return c.tree("find",a.id);a.domId&&(a.target=$("#"+a.domId))}return a}function getSibling(a,c){var b=null;if(null!=c&&(c=normalNode(c,a),b=a.tree("getParent",c.target),null==b))return null;var b=null==b?a.tree("getRoots"):b.children,d=null;if(null!=b)for(var e=0;e<b.length;++e)if(b[e].target==c.target){e+1<b.length&&(d=b[e+1]);break}return d}function GetDirectChildren(a,c){var b=[];$(c.target).next().children().children("div.tree-node").each(function(){b.push(a.tree("getNode",this))});return b};
//# sourceMappingURL=ibasesys.min.js.map
