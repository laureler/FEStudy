/*Tab模块操作*/
var nsTabModule={timer:null,init:function(){this.initHeight();setTimeout(function(){nsTabModule.initScroll()},1E3);this.addTabSelectorEvent();try{this.load&&this.load()}catch(a){console.error(a)}},onload:function(a){"[object Function]"==Object.prototype.toString.call(a)&&(this.load=a)},onTap:function(a){"[object Function]"==Object.prototype.toString.call(a)&&(this.tabSelet=a)},initHeight:function(){$(".southgis_box").length&&$(".canvas").css("height","auto")},adjustHeight:function(a){$(a).css("height","");leftHeight=$(a).height();var b=this.getDataId(a);if(b=this.getContentPage(b))$(b).css("height",""),contentHeight=$(b).height(),leftHeight>contentHeight?$(b).css("height",leftHeight):$(a).css("height",contentHeight+2)},initScroll:function(){for(var a=$(".southgis_box"),b=0,c=a.length;b<c;b++)this.scrollTool($(a[b]));$(".scroller_right").on("click",function(a){a=$(this).parent().children(".southgis_tags");var b=a.find(".southgis_tabs"),c=b.css("margin-left");nsTabModule.getTabsWidth(b.find(".southgis_tab_item"))-a.width()+25>Math.abs(parseFloat(c.replace("px","")))&&b.css("margin-left",parseFloat(c.replace("px",""))-20+"px")});$(".scroller_left").on("click",function(a){a=$(this).parent().children(".southgis_tags").find(".southgis_tabs");var b=a.css("margin-left");b&&20<=parseFloat(b.replace("px",""))?a.css("margin-left","20px"):a.css("margin-left",parseFloat(b.replace("px",""))+20+"px")})},scrollTool:function(a){var b=a.children(".southgis_tags"),c=b.find(".southgis_tab_item");this.getTabsWidth(c)>a.width()&&(b.after("\x3cdiv class\x3d'scroller_right' style\x3d'display: block; height: 28px;'\x3e\x3c/div\x3e"),b.after("\x3cdiv class\x3d'scroller_left' style\x3d'display: block; height: 28px;'\x3e\x3c/div\x3e"),b.children(".southgis_tabs").css("margin-left","20px"))},getTabsWidth:function(a){for(var b=0,c=0,d=a.length;c<d;c++)if("none"!=a[c].style.display)var e=$(a[c]).children(".southgis_tab"),e=e.children("span").length?e.children(".tabs-title")[0].innerText:e[0].innerText,b=b+(7*this.getLength(e)+26);return b},getLength:function(a){for(var b=0,c=a.length,d,e=0;e<c;e++)d=a.charCodeAt(e),b=0<=d&&128>=d?b+1:b+2;return b},getPageHeight:function(a){var b=a.children(".node_control_cont").children("[cnode\x3d'shell']"),c;a=a.children("[cnode\x3d'shell']");for(var d=0,e=a.length;d<e;d++)b[b.length]=a[d],b.length++;a=0;for(d=b.length;a<d;a++)"absolute"==b[a].style.position?"none"!=b[a].style.display&&(c=c?this.topCompare(c,b[a]):b[a]):b[a].children&&"none"!=b[a].children[0].style.display&&(c=c?this.topCompare(c,b[a].children[0]):b[a].children[0]);return c?parseFloat(c.style.top.replace("px",""))+$(c).height()+130:130},topCompare:function(a,b){var c=a.style.top.replace("px","");c?c=parseFloat(c):c=0;var d=b.style.top.replace("px","");d?d=parseFloat(d):d=0;return c+$(a).height()>=d+$(b).height()?a:b},positionJduge:function(a){var b=$(a).closest(".southgis_box");if(b.children(".scroller_right").length){var c=$(a.parentNode),d=parseFloat(c.css("margin-left").replace("px",""));25>a.offsetLeft&&c.css("margin-left",d-a.offsetLeft+25);a=parseFloat(b.css("width").replace("px",""))-a.offsetLeft-a.offsetWidth;25>a&&c.css("margin-left",d+a-25)}},addTabSelectorEvent:function(){$(".southgis_tabs").click(this.eventHandler)},eventHandler:function(a){a=a||window.event;var b=a.target;if("ul"!=b.nodeName.toLowerCase()){nsTabModule.getDataId(a.currentTarget)!=b.getAttribute("data-id")&&nsTabModule.setPage(b.getAttribute("data-id"));try{nsTabModule.tabSelet&&nsTabModule.tabSelet(a)}catch(c){console.error(c)}}},setPage:function(a){if($("li[data-id\x3d'"+a+"']").length&&"none"!=$("li[data-id\x3d'"+a+"']")[0].style.display){var b=$("li[data-id\x3d'"+a+"']").closest(".southgis_box");b.children(".southgis_tags").find(".selected").removeClass("selected");b.find("li[data-id\x3d'"+a+"']").addClass("selected");b.children(".ns_show").removeClass("ns_show");b.find("div[data-parent\x3d'"+a+"']").addClass("ns_show");return!0}return!1},select:function(a,b,c){if(c)return this.setPage(c);c=!1;a=$(document.getElementById(a)).children(".southgis_tags").find(".southgis_tab");for(var d=0,e=a.length;d<e;d++)if(a[d].innerText==b){c=this.setPage(a[d].parentNode.getAttribute("data-id"));break}return c},selectWithParent:function(a,b){function c(a,b,g){b=nsTabModule.select(a,b,g);d&&(d=b);(b=$(document.getElementById(a)).parent().closest(".southgis_tabcontent"))&&b.length&&(a=b.attr("data-parent"),b=b.parent(),c(b.attr("id"),null,a))}var d=!0;c(a,b,null);return d},selectByField:function(a){var b=!1,c=$(a),d=c.closest(".southgis_box");if(d.length){a=d.attr("id");for(var c=c.closest(".southgis_tabcontent").attr("data-parent"),d=d.children(".southgis_tags").find(".southgis_tab_item"),e=0,f=d.length;e<f;e++)if(d[e].getAttribute("data-id")==c){b=this.selectWithParent(a,d[e].innerText);break}}else b=!0;return b},selectDefault:function(a){a=$(document.getElementById(a));if(a.length){a=a.children(".southgis_tags").find(".southgis_tab_item");for(var b=0,c=a.length;b<c;b++)if("none"!=a[b].style.display){this.setPage(a[b].getAttribute("data-id"));break}}},jdugeVisible:function(a){return!0},queryUpper:function(a){var b=$(a).css("display");if("none"==b)return!1;var c=!0;for(a=a.parentNode;null!==a;)b=$(a).css("display"),"startForm"==a.id?a=null:"none"==b?-1!=a.className.indexOf("southgis_tabcontent")?(b=$(a).attr("data-parent"),"none"==$(a.parentNode).children(".southgis_tags").find(".southgis_tab_item[data-id\x3d'"+b+"']")[0].style.display?(c=!1,a=null):a=a.parentNode):(a=null,c=!1):a=a.parentNode;return c},hide:function(a,b){for(var c=$(document.getElementById(a)).children(".southgis_tags").find(".southgis_tab"),d=0,e=c.length;d<e;d++)if(c[d].innerText==b){c[d].parentNode.style.display="none";$(this.getContentPage(c[d].parentNode.getAttribute("data-id"))).removeClass("ns_show");break}},getDataId:function(a){return a instanceof jQuery?(a=a.find(".selected"))?a.attr("data-id"):null:a&&a.nodeType&&1==a.nodeType?(a=a.querySelector("*[class*\x3d'selected']"))?a.getAttribute("data-id"):null:"string"==typeof a?this.getDataId(document.getElementById(a)):null},getContentPage:function(a){return document.querySelector("div[data-parent*\x3d'"+a+"']")}};loadControl.addEvent(nsTabModule,nsTabModule.init);
//# sourceMappingURL=tags.min.js.map
