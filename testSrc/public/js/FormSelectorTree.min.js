/**
 * 目前只适用于表单标签页选择
 * 1、列表信息：表单标签页
 * 2、formid：需要选择控件的表单ID
 * 		initFields：初始选择的表单控件ID数组
 * 		itype:选择控件类型（2=标签页，1=表单控件(暂不支持)，0=所有控件）
 * 		innerContId：要内嵌界面的容器ID。如果为空，则以弹出框显示；否则将界面显示在容器中
 * 		resultFun：选择结果回调方法，原型：function (resultdata)
 * 	返回resultdata是对象数组，每个元素包含属性：id表单唯一的Id, title表单名称
 * 3、支持对表单名称进行查询
 * 4、singleParam={isSingle:true, isLevelSingle:true, }。 
 * 		（isSingle）：是否单选，true为单选，false为多选，默认false
 * 		（isLevelSingle）：是否为同级单选，true为单选，false为多选，默认false
*/

//上次用于选择控件的表单ID，如果当前表单ID与上次相同，则不会重新初始化，提升性能。
var cacheFormid7lseoe="",getAllFormInfosUrl7lseoe="/formengineWebService/getFormControlList?type\x3d{:type}\x26forminforid\x3d";function FormSelectorTree(a,c,b,h,d,g){var e="";if(2!=b)throw"\u4ec5\u652f\u6301\u8868\u5355\u6807\u7b7e\u9875\u7684\u9009\u62e9";g?"":g={};g.isSingle?"":g.isSingle=!1;g.isLevelSingle?"":g.isLevelSingle=!1;var e=(d?e+'\x3cdiv id\x3d"commonFormSelector7lseoe" style\x3d"width:100%;height:100%;"\x3e':e+'\x3cdiv id\x3d"commonFormSelector7lseoeBox"\x3e\x3cdiv id\x3d"commonFormSelector7lseoe" class\x3d"easyui-window" title\x3d"\u8bf7\u9009\u62e9\u8868\u5355\u6807\u7b7e\u9875" data-options\x3d"collapsible:false,modal:true,maximizable:false,minimizable:false,footer:\'#dlg-cfs-footer-btns7lseoe\'" style\x3d"width:350px;height:450px;"\x3e')+'\x3cdiv style\x3d"position:relative;overflow:hidden;height:100%;"\x3e\x3cdiv style\x3d"margin:0 -1px;"\x3e\x3cinput class\x3d"easyui-searchbox" data-options\x3d"prompt:\'\u8f93\u5165\u540d\u79f0\u67e5\u8be2\',searcher:SearchKongjian7lseoe" style\x3d"width:100%;height:30px;" /\x3e\x3c/div\x3e\x3cdiv style\x3d"position:absolute;bottom:0;top:30px;width:100%;overflow-x:hidden;overflow-y:auto;"\x3e\x3cul id\x3d"commSelectorListUl7lseoe" class\x3d"easyui-tree"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e',e=d?e+"\x3c/div\x3e":e+'\x3cdiv id\x3d"dlg-cfs-footer-btns7lseoe" style\x3d"line-height:35px;height:35px;text-align:center;"\x3e\x3ca class\x3d"easyui-linkbutton" data-options\x3d"iconCls:\'icon-ok\'" onclick\x3d"submitFormSelector()"\x3e\u786e\u5b9a\x3c/a\x3e\x26nbsp;\x26nbsp;\x3cspan style\x3d"margin-left:30px;"\x3e\x26nbsp;\x3c/span\x3e\x3ca class\x3d"easyui-linkbutton" data-options\x3d"iconCls:\'icon-cancel\'" onclick\x3d"$(\'#commonFormSelector7lseoe\').window(\'close\')"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',k=a+""+d;cacheFormid7lseoe!=k||0==$("#commonFormSelector7lseoe").length?(cacheFormid7lseoe=k,0<$("#commonFormSelector7lseoeBox").length?($("#commonFormSelector7lseoe").window("destroy"),$("#commonFormSelector7lseoeBox").remove()):0<$("#commonFormSelector7lseoe").length&&$("#commonFormSelector7lseoe").remove(),d?($("#"+d).html(e),$.parser.parse("#"+d)):($("body").append(e),$.parser.parse("#commonFormSelector7lseoeBox")),a=getAllFormInfosUrl7lseoe.replace("{:type}",b)+a,$.ajax({url:a,type:"GET",async:!1,dataType:"json",success:function(a){$("#commSelectorListUl7lseoe").tree({data:a,animate:!0,checkbox:function(a){return a.attributes.ftype&&"page"!=a.attributes.ftype},cascadeCheck:!1,formatter:function(a){return a.attributes.ftype&&0!=a.attributes.ftype.indexOf("page")?a.text+"-\x3cspan style\x3d'color:red;'\x3e"+a.id+"\x3c/span\x3e("+a.attributes.ftype+")":a.text},onLoadSuccess:function(a,c){$("#commSelectorListUl7lseoe").on("mouseenter","span.tree-title",function(){var a=$(this).parents(".window").css("z-index")+100,f=$(this).text(),c=$(this).width()+4,b=$(this).position().left,d=$("#commSelectorListUl7lseoe").width(),g=Math.abs(c+b-d);c+b>d&&(0!=$("body").find(".tip").length?$("body").find(".tip").remove():(f='\x3cdiv class\x3d"tip"\x3e'+f+"\x3c/div\x3e",$("body").append(f),$(".tip").css({top:$(this).offset().top+15,left:$(this).offset().left-g-10,"z-index":a})))});$("#commSelectorListUl7lseoe").on("mouseleave","span.tree-title",function(){0!=$("body").find(".tip").length&&$("body").find(".tip").remove()})},onBeforeCheck:function(a,c){var b=$("#commSelectorListUl7lseoe"),f=[];g.isSingle?f=b.tree("getChecked"):g.isLevelSingle&&(f=b.tree("getParent",a.target),f=b.tree("getChildren",f.target));if(0<f.length)for(b=0;b<f.length;b++)if(f[b].checked){f[b].checkState="";for(var d=f[b].target.children,e=0;e<d.length;e++)"tree-checkbox tree-checkbox1"==d[e].className&&(d[e].className="tree-checkbox tree-checkbox0")}}})},error:function(a,b,c){showAjaxError(a,b,c,"\u83b7\u53d6\u6570\u636e\u5931\u8d25")}})):d||$("#commonFormSelector7lseoe").window("open");treeUncheckedAll7lseoe();if(c)for(a=0;a<c.length;a++)(b=$("#commSelectorListUl7lseoe").tree("find",c[a].replace(".","-")))?$("#commSelectorListUl7lseoe").tree("check",b.target):console.log("\u4e0d\u5b58\u5728\u8282\u70b9");this.submitFormSelector=function(){var a=GetSelectedFormFields4Tree();d||$("#commonFormSelector7lseoe").window("close");h&&h(a)}}function GetSelectedFormFields4Tree(){for(var a=[],c=$("#commSelectorListUl7lseoe").tree("getChecked"),b=0;b<c.length;b++){var h={};h.id=c[b].id;h.title=c[b].text;a.push(h)}return a}function SearchKongjian7lseoe(a){searchTreeNode($("#commSelectorListUl7lseoe"),a,!0)}function treeUncheckedAll7lseoe(){for(var a=$("#commSelectorListUl7lseoe").tree("getChecked"),c=0;c<a.length;c++)$("#commSelectorListUl7lseoe").tree("uncheck",a[c].target)};
//# sourceMappingURL=FormSelectorTree.min.js.map
