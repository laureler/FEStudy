$(function(){var l=!1,n={viewPort:function(){return"BackCompat"==document.compatMode?{width:document.body.clientWidth,height:document.body.clientHeight}:{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}},getElementLeft:function(a){var c=a.offsetLeft;for(a=a.offsetParent;null!==a;)c+=a.offsetLeft,a=a.offsetParent;return c},getElementTop:function(a){var c=a.offsetTop;for(a=a.offsetParent;null!==a;)c+=a.offsetTop,a=a.offsetParent;return c},getBoundingClientRect:function(a){var c=document.documentElement.scrollTop,b=document.documentElement.scrollLeft;if(a.getBoundingClientRect)return"number"!=typeof arguments.callee.offset&&(b=document.createElement("div"),b.style.cssText="position: absolute;left: 0;top: 0;",document.body.appendChild(b),arguments.callee.offset=-b.getBoundingClientRect().top-c,document.body.removeChild(b)),c=a.getBoundingClientRect(),b=arguments.callee.offset,{left:c.left+b,right:c.right+b,top:c.top+b,bottom:c.bottom+b};var d=getElementLeft(a),e=getElementTop(a);return{left:d-b,right:d+a.offsetWidth-b,top:e-c,bottom:e+a.offsetHeight-c}}},m={required:function(a,c){var b=a.children(".nfsm_text")[0];if(h.required(b))return f.removeError(a,c),!0;f.errorMesadd(a,"\u8be5\u8f93\u5165\u9879\u4e3a\u5fc5\u8f93\u9879");return!1},integer:function(a,c){var b=a.children(".nfsm_text")[0],d="-"==b.value.substring(0,1)?b.value.substring(0,1):"";b.value=b.value.replace(/[^\d]/g,"");b.value=d+b.value.replace(/^[0]/g,"");if(h.integer(b))return f.removeError(a,c),!0;f.errorMesadd(a,h.required(b)?"\u8bf7\u8f93\u5165\u6574\u6570":"\u8be5\u8f93\u5165\u9879\u4e3a\u5fc5\u8f93\u9879");return!1},intOrFloat:function(a,c){var b=a.children(".nfsm_text")[0],d="-"==b.value.substring(0,1)?b.value.substring(0,1):"";b.value=b.value.replace(/[^\d\.]/g,"");b.value=b.value.replace(/^\./g,"");b.value=b.value.replace(/\.{2,}/g,".");b.value=d+b.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");if(h.intOrFloat(b))return f.removeError(a,c),!0;f.errorMesadd(a,h.required(b)?"\u8bf7\u8f93\u5165\u6574\u6570\u6216\u5c0f\u6570\uff0c\u5e76\u786e\u4fdd\u683c\u5f0f\u6b63\u786e":"\u8be5\u8f93\u5165\u9879\u4e3a\u5fc5\u8f93\u9879");return!1}},h={required:function(a){return""!=a.value&&null!=a.value},integer:function(a){var c=$(a).attr("required"),b=/^(\-?)[1-9]+\d*$/i.test(a.value);return c?b:a.value?b:!0},intOrFloat:function(a){var c=$(a).attr("required"),b=/^(\-?)\d+(\.\d+)?$/i.test(a.value);return c?b:a.value?b:!0}},f={setValue:function(a,c,b){a.children(".nfsm_text").val(c);c=this.validate(a,b);if((b=a.children(".nfsm_text").attr("data-event"))&&!a.attr("edit")){a.attr("edit",1);setTimeout(function(){a.removeAttr("edit")},10);try{d.events[parseInt(b)]&&d.events[parseInt(b)].fn({currentTarget:a.children(".nfsm_text")[0]},c)}catch(g){console.error(g)}}},getValue:function(a){return a.children(".nfsm_text").val()},clear:function(a,c){a.children(".nfsm_text").val("");var b=this.validate(a,c),g=a.children(".nfsm_text").attr("data-event");if(g){a.attr("edit",1);setTimeout(function(){a.removeAttr("edit")},10);try{d.events[parseInt(g)]&&d.events[parseInt(g)].fn({currentTarget:a.children(".nfsm_text")[0]},b)}catch(k){console.error(k)}}},validate:function(a,c){var b=a.attr("validType")||a.children(".nfsm_text").attr("required");if(m[b]){var d=m[b](a,c);if("[object Function]"==Object.prototype.toString.call(c))try{c(h[b](a.children(".nfsm_text")[0]))}catch(k){console.error(k)}return d}return!0},updateTip:function(a,c){a.attr("data-mes",c)},showInputErrr:function(a,c,b){f.errorMesadd(a,b);d.focusEvent(c)},errorMesadd:function(a,c){a.addClass("nfsm_textVerify");c&&a.attr("data-mes",c);d.unbindMouseEvent(a);d.addMouseEvent(a)},removeError:function(a,c){a.removeClass("nfsm_textVerify");d.unbindMouseEvent(a);d.blurEvent();this.updateTip(a,"");e.hide();c&&c(a)},input:function(a,c){d.events.push({ele:a,fn:c});l&&d.singleEvent(a,c,d.events.length-1)},isValid:function(a){return-1==a.attr("class").indexOf("nfsm_textVerify")},validAll:function(a){return $(".nfsm_textVerify").length?!0:!1},init:function(){d.init();this.init=function(){l=!0;console.log("init complete")}},initInnerAll:function(a){a=a.find(".nfsm_textbox");for(var c=0,b=a.length;c<b;c++)void 0==$(a[c]).children(".nfsm_text").attr("data-event")&&($(a[c]).attr("validType")||$(a[c]).children(".nfsm_text").attr("required"))&&(d.addInputEvent($(a[c])),d.addFocusEvent($(a[c])))}};$.fn.nsTooltip=function(a,c){if("string"==typeof a)switch(a){case "show":d.addMouseEvent(this);break;case "remove":d.unbindMouseEvent(this);this.removeAttr("focus-parent");this.removeAttr("data-mes");d.focusEvent({currentTarget:this[0]});break;case "update":f.updateTip(this,c);break;case "focus":d.focusEvent({currentTarget:this[0]})}};var d={events:[],init:function(){for(var a=0,c=this.events.length;a<c;a++){var b=this.events[a].ele;b.children(".nfsm_text").attr("data-event",a);if(!b.attr("validType")&&!b.children(".nfsm_text").attr("required"))b.children(".nfsm_text").on("input",d.inputEvtEx)}$(".nfsm_textbox").each(function(){if(this.getAttribute("validType")||$(this).children(".nfsm_text").attr("required"))d.addInputEvent($(this)),d.addFocusEvent($(this))})},singleEvent:function(a,c,b){a.children(".nfsm_text").attr("data-event",b);if(a.attr("validType")||a.children(".nfsm_text").attr("required"))d.addInputEvent(a),d.addFocusEvent(a);else a.children(".nfsm_text").on("input",d.inputEvtEx)},addInputEvent:function(a){f.validate(a);a.children(".nfsm_text").on("input",d.inputEvt)},inputEvt:function(a){var c=f.validate($(a.currentTarget).parent());d.focusEvent(a);d.inputEvtEx(a,c)},inputEvtEx:function(a,c){var b=a.currentTarget.getAttribute("data-event");if(b)try{d.events[parseInt(b)]&&d.events[parseInt(b)].fn(a,c)}catch(g){console.error(g)}},addMouseEvent:function(a){a.mouseenter(d.updateTooltip);a.mouseleave(e.hide);d.addFocusEvent(a)},updateTooltip:function(a){if(a){var c=a.currentTarget.getAttribute("focus"),b=a.clientX+this.offsetWidth-a.offsetX+12,d=a.clientY-a.offsetY;-1!=a.target.className.indexOf("nfsm_border")||"input"==a.currentTarget.nodeName.toLowerCase()||"textarea"==a.currentTarget.nodeName.toLowerCase()?e.update(b,d,a.currentTarget.getAttribute("data-mes")):e.update(b-4,d-4,a.currentTarget.getAttribute("data-mes"));c&&e.hide()}},unbindMouseEvent:function(a){a.unbind("mouseenter",d.updateTooltip);a.unbind("mouseleave",e.hide);a.is("input")||a.is("textarea")?(a.unbind("focus",d.focusEvent),a.unbind("blur",d.blurEvent)):(a.find("input").unbind("focus",d.focusEvent),a.find("textarea").unbind("focus",d.focusEvent),a.find("input").unbind("blur",d.blurEvent),a.find("textarea").unbind("blur",d.blurEvent))},addFocusEvent:function(a){a.attr("focus-parent",1);a.is("input")||a.is("textarea")?(a.focus(d.focusEvent),a.blur(d.blurEvent)):(a.find("input").focus(d.focusEvent),a.find("textarea").focus(d.focusEvent),a.find("input").blur(d.blurEvent),a.find("textarea").blur(d.blurEvent))},focusEvent:function(a){if(a){a=$(a.currentTarget).closest("[focus-parent\x3d'1']");a.attr("focus",!0);var c=a.attr("data-mes");e.focusUpdate(a[0]||a.context,c);$("#formPanel").on("scroll",d.scrollHandler);$(".easyui-dialog[closed*\x3d'true']").on("scroll",d.scrollHandlertwo);e.hide()}},scrollHandler:function(a){e.indexSet(1E3);clearTimeout(d.timer);d.timer=setTimeout(function(){if(document.activeElement){var a=$(document.activeElement).closest("[focus-parent\x3d'1']");a.length&&e.focusUpdate(a[0],a[0].getAttribute("data-mes"))}},50)},scrollHandlertwo:function(a){clearTimeout(d.timer);a.currentTarget.scrollTop>d.getParentTop(document.activeElement,"canvas")+document.activeElement.offsetHeight?e.indexSet(-1):e.indexSet(1E4);d.timer=setTimeout(function(){if(document.activeElement){var a=$(document.activeElement).closest("[focus-parent\x3d'1']");a.length&&e.focusUpdate(a[0],a[0].getAttribute("data-mes"))}},50)},blurEvent:function(a){e.focusHide();e.indexSet(1E4);a&&$(a.currentTarget).closest("[focus-parent\x3d'1']").removeAttr("focus");$("#formPanel").unbind("scroll",d.scrollHandler);$(".easyui-dialog[closed*\x3d'true']").unbind("scroll",d.scrollHandlertwo)},getParentTop:function(a,c){for(var b=a.offsetTop,d=a.offsetParent;null!==d&&-1==d.className.indexOf(c);)b+=d.offsetTop,d=d.offsetParent;return b}};loadControl.addEvent(null,function(){$.fn.nsTextbox("init")});$.fn.nsTextbox=function(a,c,b){if("string"==typeof a)if(f[a]){if(a=f[a](this,c,b),void 0!=a)return a}else console.error(a+"\u65b9\u6cd5\u4e0d\u5b58\u5728");return this.children(".nfsm_text")};var e={update:function(a,c,b){this.show();a&&c&&$("#tips_move").css({top:c+"px",left:a+"px"});b?$("#tips_move").children(".tip_message").html(b):this.hide()},hide:function(){$("#tips_move").css({display:"none"})},show:function(){$("#tips_move").css({display:""})},focusUpdate:function(a,c){this.focusShow();var b=n.getBoundingClientRect(a),d=b.left+a.offsetWidth+12,b=b.top+1;$("#tip_focus").css({top:b+"px",left:d+"px"});c?$("#tip_focus").children(".tip_message").html(c):this.focusHide()},focusShow:function(){$("#tip_focus").css({display:""})},focusHide:function(){$("#tip_focus").css({display:"none"})},indexSet:function(a){$("#tip_focus").css({"z-index":a})}}});
//# sourceMappingURL=input.min.js.map
