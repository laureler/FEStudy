//首次进入页面的url地址；
var url1="findTrackingHistoryTaskByProcessInstanceId",url2="getProcessInstanceOperationRecordByTaskId";$(function(){$("#full").click(function(){$(".bottom").css({position:"absolute",height:"850px"});document.querySelector(".bottom").scrollIntoView(!0)});$("#cancel").click(function(){$(".bottom").css({position:"static",height:"300px"})})});var researchDetails=function(b,a,e){b||(b=url1);var c={processInstanceId:e};a&&(c={processInstanceId:e,taskKey:a});$.ajax({type:"GET",url:b,data:c,dataType:"json",success:function(a){for(var c=0;c<a.length;c++){var d=a[c];d.startTime=null==d.startTime?"":formatDateTime(d.startTime);d.endTime=null==d.endTime?"\u6682\u672a\u7ed3\u675f":formatDateTime(d.endTime);d.claimTime=null==d.claimTime?"":formatDateTime(d.claimTime);d.childTitle=0<d.childProcess.length?d.childProcess[0].title?d.childProcess[0].title+"-"+d.childProcess[0].jid:d.childProcess[0].jid:"\u67e5\u770b\u5b50\u6d41\u7a0b\u7a97\u53e3";d.opr='\x3cp class\x3d"aLink view" style\x3d"float: left;" onclick\x3d"openData(\''+d.id+"')\"\x3e\u67e5\u770b\u6d41\u7a0b\n                \x3c/p\x3e"+(0==d.childProcess.length?"":'\x3cp class\x3d"aLink viewSon" style\x3d"float: left;" onclick\x3d"\n                searchProcess(\'\',\''+d.childTitle+"','"+d.childProcess[0].processInstanceId+"','')\"\x3e\u67e5\u770b\u5b50\u6d41\u7a0b\x3c/p\x3e")}$("#details").datagrid({data:a,fitColumns:!0,fit:!0,rownumbers:!0,columns:[[{field:"name",title:"\u73af\u8282",width:100},{field:"taskStatus",title:"\u72b6\u6001",width:100},{field:"assignee",title:"\u529e\u7406\u4eba",width:100},{field:"startTime",title:"\u5230\u8fbe\u65f6\u95f4",width:150},{field:"claimTime",title:"\u63a5\u529e\u65f6\u95f4",width:150},{field:"endTime",title:"\u529e\u7406\u65f6\u95f4",width:150},{field:"opr",title:"\u64cd\u4f5c",width:70,formatter:formatterValue}]]})}})},formatterValue=function(b,a,e){return b},formatDateTime=function(b){if(""==b)return"";var a=new Date;a.setTime(b);b=a.getFullYear();var e=a.getMonth()+1,e=10>e?"0"+e:e,c=a.getDate(),c=10>c?"0"+c:c,f=a.getHours(),f=10>f?"0"+f:f,g=a.getMinutes(),a=a.getSeconds();return b+"-"+e+"-"+c+" "+f+":"+(10>g?"0"+g:g)+":"+(10>a?"0"+a:a)},loadFilterDataName={open:"\u6253\u5f00\u8868\u5355",activateProcessInstance:"\u89e3\u9664\u6302\u8d77",suspendProcessInstance:"\u6302\u8d77",refuseApplySuspend:"\u62d2\u7edd\u6302\u8d77",applySuspend:"\u7533\u8bf7\u6302\u8d77",startProcess:"\u542f\u52a8\u6d41\u7a0b\u5b9e\u4f8b",createTask:"\u521b\u5efa\u4efb\u52a1",setRemindMessage:"\u50ac\u529e",claim:"\u63a5\u529e\u4efb\u52a1",unclaim:"\u64a4\u529e\u4efb\u52a1",complete:"\u5b8c\u6210\u4efb\u52a1",passTo:"\u8f6c\u529e\u4efb\u52a1",sendBack:"\u4efb\u52a1\u8df3\u8f6c",backOffice:"\u6536\u56de",reRun:"\u9000\u56de",finish:"\u7ed3\u6863",refund:"\u9000\u4ef6",modifyProcessInstanceName:"\u4fee\u6539\u6d41\u7a0b\u540d\u79f0",deleteProcessInstance:"\u5f7b\u5e95\u5220\u9664\u6d41\u7a0b\u5b9e\u529b",supervision:"\u7763\u529e",endsupervision:"\u53d6\u6d88\u7763\u529e",disposeRefund:"\u9000\u4ef6\u529e\u7406"},openData=function(b){var a={taskId:b};taskId=b;var e=url2;b||(e="getProcessInstanceOperationRecord",a={processInstanceId:processInstanceId});$("#linkMsg").window("open");$("#linkMsgTable").datagrid({url:e,queryParams:a,rownumbers:!0,fit:!0,loadFilter:function(a){for(var c=loadFilterDataName,b=0;b<a.length;b++)a[b].operationType=c[a[b].operationType],a[b].operationTime=formatDateTime(a[b].operationTime);return a},method:"get",loadMsg:"\u52a0\u8f7d\u4e2d...\u8bf7\u7a0d\u540e",nowrap:!1})},openChildProcessData=function(b){b={processInstanceId:b};$("#linkMsg").window("open");$("#linkMsgTable").datagrid({url:"getProcessInstanceOperationRecord",queryParams:b,rownumbers:!0,fit:!0,loadFilter:function(a){for(var b=loadFilterDataName,c=0;c<a.length;c++)a[c].operationType=b[a[c].operationType],a[c].operationTime=formatDateTime(a[c].operationTime);return a},method:"get",loadMsg:"\u52a0\u8f7d\u4e2d...\u8bf7\u7a0d\u540e",nowrap:!1})};
//# sourceMappingURL=message.min.js.map
